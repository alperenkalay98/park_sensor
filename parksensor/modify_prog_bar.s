GPIO_PORTA_DATA		EQU	0x400043FC
SSI0_SR				EQU	0x4000800C
THRESH_UPD			EQU	0x20000400
MEAS_UPD			EQU	0x20000500	
	
THRESH_VAL			EQU	0x20000600
MEAS_VAL			EQU	0x20000700	
					

;I am basically changing obstacle locations. base display is ----------
;i add X threshold value to somewhere -->		-X--------
;then i add | lines depending on this subrouitne and changes like for instance -> -X----||||
					AREA		sdata,CODE,READONLY
					THUMB

ds10		DCB	  0x00, 0x00, 0x7f, 0x00, 0x00 ;|
			DCB	  0x00, 0x00, 0x7f, 0x00, 0x00 ;|
			DCB	  0x00, 0x00, 0x7f, 0x00, 0x00 ;|
			DCB	  0x00, 0x00, 0x7f, 0x00, 0x00 ;|
			DCB	  0x00, 0x00, 0x7f, 0x00, 0x00 ;|
			DCB	  0x00, 0x00, 0x7f, 0x00, 0x00 ;|
			DCB	  0x00, 0x00, 0x7f, 0x00, 0x00 ;|
			DCB	  0x00, 0x00, 0x7f, 0x00, 0x00 ;|
			DCB	  0x00, 0x00, 0x7f, 0x00, 0x00 ;|
			DCB	  0x00, 0x00, 0x7f, 0x00, 0x00 ;|

ds9			DCB	  0x00, 0x00, 0x7f, 0x00, 0x00 ;|
			DCB	  0x00, 0x00, 0x7f, 0x00, 0x00 ;|
			DCB	  0x00, 0x00, 0x7f, 0x00, 0x00 ;|
			DCB	  0x00, 0x00, 0x7f, 0x00, 0x00 ;|
			DCB	  0x00, 0x00, 0x7f, 0x00, 0x00 ;|
			DCB	  0x00, 0x00, 0x7f, 0x00, 0x00 ;|
			DCB	  0x00, 0x00, 0x7f, 0x00, 0x00 ;|
			DCB	  0x00, 0x00, 0x7f, 0x00, 0x00 ;|
			DCB	  0x00, 0x00, 0x7f, 0x00, 0x00 ;|

ds8			DCB	  0x00, 0x00, 0x7f, 0x00, 0x00 ;|
			DCB	  0x00, 0x00, 0x7f, 0x00, 0x00 ;|
			DCB	  0x00, 0x00, 0x7f, 0x00, 0x00 ;|
			DCB	  0x00, 0x00, 0x7f, 0x00, 0x00 ;|
			DCB	  0x00, 0x00, 0x7f, 0x00, 0x00 ;|
			DCB	  0x00, 0x00, 0x7f, 0x00, 0x00 ;|
			DCB	  0x00, 0x00, 0x7f, 0x00, 0x00 ;|
			DCB	  0x00, 0x00, 0x7f, 0x00, 0x00 ;|

ds7			DCB	  0x00, 0x00, 0x7f, 0x00, 0x00 ;|
			DCB	  0x00, 0x00, 0x7f, 0x00, 0x00 ;|
			DCB	  0x00, 0x00, 0x7f, 0x00, 0x00 ;|
			DCB	  0x00, 0x00, 0x7f, 0x00, 0x00 ;|
			DCB	  0x00, 0x00, 0x7f, 0x00, 0x00 ;|
			DCB	  0x00, 0x00, 0x7f, 0x00, 0x00 ;|
			DCB	  0x00, 0x00, 0x7f, 0x00, 0x00 ;|
			
ds6			DCB	  0x00, 0x00, 0x7f, 0x00, 0x00 ;|
			DCB	  0x00, 0x00, 0x7f, 0x00, 0x00 ;|
			DCB	  0x00, 0x00, 0x7f, 0x00, 0x00 ;|
			DCB	  0x00, 0x00, 0x7f, 0x00, 0x00 ;|
			DCB	  0x00, 0x00, 0x7f, 0x00, 0x00 ;|
			DCB	  0x00, 0x00, 0x7f, 0x00, 0x00 ;|			
			
ds5			DCB	  0x00, 0x00, 0x7f, 0x00, 0x00 ;|
			DCB	  0x00, 0x00, 0x7f, 0x00, 0x00 ;|
			DCB	  0x00, 0x00, 0x7f, 0x00, 0x00 ;|
			DCB	  0x00, 0x00, 0x7f, 0x00, 0x00 ;|
			DCB	  0x00, 0x00, 0x7f, 0x00, 0x00 ;|				
			
ds4			DCB	  0x00, 0x00, 0x7f, 0x00, 0x00 ;|
			DCB	  0x00, 0x00, 0x7f, 0x00, 0x00 ;|
			DCB	  0x00, 0x00, 0x7f, 0x00, 0x00 ;|
			DCB	  0x00, 0x00, 0x7f, 0x00, 0x00 ;|			
			
ds3			DCB	  0x00, 0x00, 0x7f, 0x00, 0x00 ;|
			DCB	  0x00, 0x00, 0x7f, 0x00, 0x00 ;|
			DCB	  0x00, 0x00, 0x7f, 0x00, 0x00 ;|

ds2			DCB	  0x00, 0x00, 0x7f, 0x00, 0x00 ;|
			DCB	  0x00, 0x00, 0x7f, 0x00, 0x00 ;|

ds1			DCB	  0x00, 0x00, 0x7f, 0x00, 0x00 ;|


thresh		DCB	  0x63, 0x14, 0x08, 0x14, 0x63 ;X
			
			
					AREA		subroutines,CODE,READONLY
					THUMB
					EXTERN		byte_send
					EXTERN		set_cursor2
					EXTERN		c0and999
					EXTERN		c100and999
					EXTERN		c200and999	
					EXTERN		c300and999		
					EXTERN		c400and999	
					EXTERN		c500and999	
					EXTERN		c600and999	
					EXTERN		c700and999	
					EXTERN		c800and999	
					EXTERN		c900and999
					EXTERN		delayer
					EXTERN		thresh_cursor
					EXPORT		modify_sim
modify_sim
		PUSH	{R0-R5,LR}
		
		LDR		R5,=thresh			;load r5 'X' char for representing threshold value
		BL		thresh_cursor		;change this bottom line simulation screen with thresh_cursor
		BL		delayer	
		
		LDR		R5,=MEAS_VAL		;read meas value
		LDRB	R0,[R5,#2]			;value after that value will be represented with '|'
		SUB		R0,R0,#'0'
		
		CMP		R0,#0				;decide how many | will ben shown 
		BEQ		c000t0999			;every cursor have different X axis value and byte value to print
		CMP		R0,#1				;i explained it in that .s page
		BEQ		c100t0999
		CMP		R0,#2
		BEQ		c200t0999
		CMP		R0,#3
		BEQ		c300t0999
		CMP		R0,#4
		BEQ		c400t0999
		CMP		R0,#5
		BEQ		c500t0999
		CMP		R0,#6
		BEQ		c600t0999
		CMP		R0,#7
		BEQ		c700t0999
		CMP		R0,#8
		BEQ		c800t0999
		CMP		R0,#9
		BEQ		c900t0999
		B		done
								;load r5 in different lenght repeated '|'  ,depending on measurement msb number
								;display it with cursors specialized to that number
c000t0999							
		LDR		R5,=ds10
		BL		c0and999
		B		done
c100t0999
		LDR		R5,=ds9
		BL		c100and999
		B		done
c200t0999
		LDR		R5,=ds8
		BL		c200and999
		B		done
c300t0999
		LDR		R5,=ds7
		BL		c300and999
		B		done
c400t0999
		LDR		R5,=ds6
		BL		c400and999
		B		done
c500t0999
		LDR		R5,=ds5
		BL		c500and999
		B		done
c600t0999
		LDR		R5,=ds4
		BL		c600and999
		B		done
c700t0999
		LDR		R5,=ds3
		BL		c700and999
		B		done
c800t0999
		LDR		R5,=ds2
		BL		c800and999
		B		done		
c900t0999
		LDR		R5,=ds1
		BL		c900and999
		B		done

done	POP		{R0-R5,LR}
		BX		LR